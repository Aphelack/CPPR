# Лабораторная работа №2

## Язык Razor. Частичные представления и компоненты представлений

**(2 часа)**

---

## 1. Цель работы

Знакомство с языком Razor. Изучение частичных представлений и компонентов представлений.

---

## 2. Задача работы

Научиться:

* создавать и использовать частичные представления
* использовать компоненты представлений
* передавать данные от контроллера к представлению

---

## 3. Выполнение работы

---

### 3.1. Использование Tag Helpers для формирования адресов ссылок

#### a. Измените разметку главного меню, используя tag-helpers

Пункты меню должны ссылаться на методы:

| Пункт меню        | Area  | Controller | Action | Page   |
| ----------------- | ----- | ---------- | ------ | ------ |
| Лб1               | —     | Home       | Index  | —      |
| Каталог           | —     | Product    | Index  | —      |
| Администрирование | Admin | —          | —      | /Index |

Также измените разметку информации пользователя, используя tag-helpers:

| Ссылка  | Area | Controller | Action |
| ------- | ---- | ---------- | ------ |
| Корзина | —    | Cart       | Index  |
| Logout  | —    | Account    | LogOut |

#### b. Запустите проект и проверьте результат

> Примечание: контроллеры Product, Cart и Account, а также страницы администратора пока отсутствуют — ссылки работать не будут.

---

### 3.2. Передача данных от контроллера к представлению. Язык Razor

#### a. Оформите список (`<ol>`) с помощью цикла `for`

#### b. Запустите проект и проверьте результат

#### c. Через ViewData передайте в представление Index строку:

**«Лабораторная работа №2»**

Эта строка должна заменить:

```html
<h1>Лабораторная работа 1</h1>
```

#### d. Создайте в Index элемент формы select

Используйте в качестве данных объект `SelectList`.
Создайте класс:

```csharp
public class ListDemo
{
    public int Id { get; set; }
    public string Name { get; set; }
}
```

Требования:

* на странице показывать **Name**
* отправлять **Id**
* моделью передать список в представление
* использовать tag-helper `asp-items`

#### e. Запустите проект и проверьте результат

Используйте инструменты разработчика → Network → Payload
Убедитесь, что значение передано корректно.

---

### 3.3. Создание частичных представлений

#### a. Меню сайта и информацию пользователя оформить как частичные представления

(по аналогии с лабораторной №1)

#### b. Для активного пункта меню используйте класс `active`

Пример:

```cshtml
@{
    var controller = ViewContext.RouteData.Values["controller"]?
        .ToString()?
        .ToLower()
        ?? string.Empty;
}
<a class="nav-item nav-link @(controller=="home" ? "active" : "")"
   asp-controller="home"
   asp-action="index">Лб 1</a>
```

#### c. Подключите частичные представления в шаблоне страницы (_Layout.cshtml)

Пример:

```cshtml
<header>
    <div class="container">
        <nav class="navbar bg-dark navbar-expand-md border-bottom border-body" data-bs-theme="dark">
            <partial name="_MenuPartial" />
            <partial name="_UserInfoPartial" />
        </nav>
    </div>
</header>
```

#### d. Запустите проект и убедитесь, что внешний вид не изменился

---

### 3.4. Создание компонента представления

#### a. Информацию о корзине оформить в виде компонента представления

Использовать компонент в частичном представлении:

```cshtml
@await Component.InvokeAsync("Cart")
```

#### b. Запустите проект и проверьте, что визуально ничего не изменилось

---

## 4. Контрольные вопросы

1. Для чего используется tag-helper `asp-action`?
2. Что такое частичное представление?
3. Как разместить частичное представление в разметке представления?
4. Чем компонент представления отличается от частичного представления?
5. Как разместить компонент представления в разметке?
6. Где находится файл представления компонента?
7. Чем отличаются ViewData и ViewBag?
8. Что такое модель представления?
9. Как указать в представлении класс модели?
10. Как получить доступ к членам модели представления?

