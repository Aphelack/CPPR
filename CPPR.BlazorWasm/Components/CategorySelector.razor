@using CPPR.Domain.Entities
@inject CPPR.BlazorWasm.Services.IDataService DataService

<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
        @(DataService.SelectedCategory?.Name ?? "All Categories")
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <li><a class="dropdown-item" @onclick="() => SelectCategory(null)">All Categories</a></li>
        @foreach (var category in DataService.Categories)
        {
            <li><a class="dropdown-item" @onclick="() => SelectCategory(category)">@category.Name</a></li>
        }
    </ul>
</div>

@code {
    [Parameter]
    public EventCallback<Category?> OnCategorySelected { get; set; }

    private async Task SelectCategory(Category? category)
    {
        DataService.SelectedCategory = category;
        await OnCategorySelected.InvokeAsync(category);
    }
}
